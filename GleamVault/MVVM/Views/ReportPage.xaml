<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GleamVault.MVVM.Views.ReportPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:charts="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
    xmlns:conv="clr-namespace:GleamVault.Converters"
    xmlns:editors="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
    xmlns:models="clr-namespace:GleamVault.MVVM.ViewModels"
    xmlns:shapes="clr-namespace:Microsoft.Maui.Controls.Shapes;assembly=Microsoft.Maui.Controls"
    xmlns:vm="clr-namespace:GleamVault.MVVM.ViewModels"
    x:DataType="vm:ReportsVM"
    Background="{StaticResource Brush.BackgroundGradient}">
    <ContentPage.Resources>
        <conv:NumberFormatConverter x:Key="NumberFormatConverter"/>
        <conv:TrendColorConverter x:Key="TrendColorConverter"/>
        <conv:TimeframeSelectedConverter x:Key="TimeframeSelectedConverter"/>
    </ContentPage.Resources>

    <ScrollView>
        <Grid RowDefinitions="Auto,*"
                RowSpacing="0">
            <Grid Grid.Row="0"
                    HeightRequest="200">
                <shapes:Path
                    Aspect="Fill"
                    Data="M0,0 L0,160 Q180,210 360,160 T720,160 L720,0 Z"
                    Fill="{StaticResource Brush.HeaderGradient}"
                    HorizontalOptions="Fill"
                    InputTransparent="True"
                    Opacity="1"
                    VerticalOptions="Fill"/>
                <shapes:Path
                    Aspect="Fill"
                    Data="M0,0 L0,175 Q180,225 360,175 T720,175 L720,0 Z"
                    Fill="White"
                    HorizontalOptions="Fill"
                    InputTransparent="True"
                    Opacity="0.12"
                    VerticalOptions="Fill"/>
                <Grid Padding="20,20,20,0"
                        VerticalOptions="Start">
                    <HorizontalStackLayout Spacing="8">
                        <Image
                            HeightRequest="30"
                            Source="diamond.png"
                            WidthRequest="30"/>
                        <Label StyleClass="h2"
                                Text="Dashboard"/>
                    </HorizontalStackLayout>
                </Grid>
            </Grid>

            <Grid
                Grid.Row="1"
                Padding="20"
                RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                RowSpacing="20">

                <Border
                    Grid.Row="0"
                    Padding="20"
                    Background="#1E1E1E"
                    Shadow="{StaticResource Sh.CyanMd}"
                    StrokeShape="RoundRectangle 20"
                    StrokeThickness="0">
                    <Grid RowDefinitions="Auto,Auto,*">
                        <Grid Grid.Row="0"
                                ColumnDefinitions="Auto,*,Auto">
                            <VerticalStackLayout Grid.Column="0"
                                    Spacing="4">
                                <Label
                                    FontFamily="NexaHeavy"
                                    FontSize="20"
                                    Text="XAU/USD"
                                    TextColor="White"/>
                                <Label
                                    FontSize="14"
                                    Text="{Binding CurrentGoldPrice.Price, StringFormat='${0:F2}'}"
                                    TextColor="White"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout
                                Grid.Column="1"
                                HorizontalOptions="End"
                                Spacing="4">
                                <Label
                                    FontSize="12"
                                    HorizontalTextAlignment="End"
                                    Text="{Binding CurrentGoldPrice.ChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="White"/>
                                <Label
                                    FontSize="11"
                                    HorizontalTextAlignment="End"
                                    Text="{Binding CurrentGoldPrice.Timestamp, StringFormat='Updated: {0:MMM dd, HH:mm}'}"
                                    TextColor="White"/>
                            </VerticalStackLayout>
                            <Border
                                Grid.Column="2"
                                Margin="15,0,0,0"
                                Padding="10,6"
                                Background="#333333"
                                StrokeShape="RoundRectangle 8"
                                StrokeThickness="0">
                                <editors:SfComboBox
                                    Background="Transparent"
                                    DropDownBackground="#2E2E2E"
                                    DropDownIconColor="#00D4B5"
                                    DropDownItemHeight="40"
                                    DropDownItemTextColor="White"
                                    FontFamily="NexaLight"
                                    FontSize="12"
                                    IsEditable="False"
                                    ItemsSource="{Binding Timeframes}"
                                    SelectedItem="{Binding SelectedTimeframe, Mode=TwoWay}"
                                    SelectionChanged="TimeframeCombo_SelectionChanged"
                                    Stroke="Transparent"
                                    TextColor="White"
                                    WidthRequest="100">
                                    <editors:SfComboBox.ItemTemplate>
                                        <DataTemplate x:DataType="x:String">
                                            <Grid Padding="12,8"
                                                    BackgroundColor="Transparent">
                                                <Label
                                                    FontFamily="NexaLight"
                                                    FontSize="12"
                                                    Text="{Binding}"
                                                    TextColor="White"
                                                    VerticalOptions="Center"/>
                                            </Grid>
                                        </DataTemplate>
                                    </editors:SfComboBox.ItemTemplate>
                                </editors:SfComboBox>
                            </Border>
                        </Grid>
                        <BoxView
                            Grid.Row="1"
                            Margin="0,10"
                            BackgroundColor="#333333"
                            HeightRequest="1"/>
                        <Grid Grid.Row="2"
                                Margin="0,10,0,0">
                            <charts:SfCartesianChart BackgroundColor="#1E1E1E">
                                <charts:SfCartesianChart.XAxes>
                                    <charts:DateTimeAxis>
                                        <charts:DateTimeAxis.LabelStyle>
                                            <charts:ChartAxisLabelStyle LabelFormat="MMM dd"
                                                    TextColor="White"/>
                                        </charts:DateTimeAxis.LabelStyle>
                                        <charts:DateTimeAxis.AxisLineStyle>
                                            <charts:ChartLineStyle Stroke="White"/>
                                        </charts:DateTimeAxis.AxisLineStyle>
                                    </charts:DateTimeAxis>
                                </charts:SfCartesianChart.XAxes>
                                <charts:SfCartesianChart.YAxes>
                                    <charts:NumericalAxis>
                                        <charts:NumericalAxis.LabelStyle>
                                            <charts:ChartAxisLabelStyle LabelFormat="$0.00"
                                                    TextColor="White"/>
                                        </charts:NumericalAxis.LabelStyle>
                                    </charts:NumericalAxis>
                                </charts:SfCartesianChart.YAxes>
                                <charts:SfCartesianChart.Series>
                                    <charts:LineSeries
                                        EnableTooltip="True"
                                        ItemsSource="{Binding GoldPriceHistory}"
                                        ShowDataLabels="False"
                                        XBindingPath="Date"
                                        YBindingPath="Close"/>
                                </charts:SfCartesianChart.Series>
                            </charts:SfCartesianChart>
                        </Grid>
                    </Grid>
                </Border>

                <Grid
                    Grid.Row="1"
                    ColumnDefinitions="*,*"
                    ColumnSpacing="20">
                    <Border
                        Grid.Column="0"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0"
                                    ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="Total Gold Weight Sold"/>
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20"/>
                            </Grid>
                            <Grid Grid.Row="1"
                                    VerticalOptions="Center">
                                <charts:SfCircularChart>
                                    <charts:SfCircularChart.Series>
                                        <charts:PieSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding GoldWeightBySaleType}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Value"/>
                                    </charts:SfCircularChart.Series>
                                </charts:SfCircularChart>
                                <VerticalStackLayout
                                    HorizontalOptions="End"
                                    Spacing="10"
                                    VerticalOptions="Center">
                                    <Label
                                        FontFamily="NexaHeavy"
                                        FontSize="16"
                                        HorizontalTextAlignment="Center"
                                        Text="{Binding TotalGoldWeightValue, StringFormat='${0:N0}'}"
                                        TextColor="{StaticResource TextDark}"/>
                                    <Label
                                        FontSize="14"
                                        HorizontalTextAlignment="Center"
                                        Text="Total Value"
                                        TextColor="{StaticResource TextLight}"/>
                                </VerticalStackLayout>
                            </Grid>
                            <VerticalStackLayout Grid.Row="2"
                                    Spacing="8">
                                <Border
                                    Padding="10,6"
                                    Background="#26A69A"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#26A69A"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Direct Sale"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding GoldWeightBySaleType[0].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding GoldWeightBySaleType[0].Value, StringFormat='{0} grams'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#5D6D7E"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#5D6D7E"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Online"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding GoldWeightBySaleType[1].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding GoldWeightBySaleType[1].Value, StringFormat='{0} grams'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#4A90E2"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#4A90E2"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Custom Order"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding GoldWeightBySaleType[2].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding GoldWeightBySaleType[2].Value, StringFormat='{0} grams'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                            </VerticalStackLayout>
                        </Grid>
                    </Border>

                    <Border
                        Grid.Column="1"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0"
                                    ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="Total Sales Revenue"/>
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20"/>
                            </Grid>
                            <Grid Grid.Row="1"
                                    VerticalOptions="Center">
                                <charts:SfCircularChart>
                                    <charts:SfCircularChart.Series>
                                        <charts:PieSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding RevenueBySaleType}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Value"/>
                                    </charts:SfCircularChart.Series>
                                </charts:SfCircularChart>
                                <VerticalStackLayout
                                    HorizontalOptions="End"
                                    Spacing="10"
                                    VerticalOptions="Center">
                                    <Label
                                        FontFamily="NexaHeavy"
                                        FontSize="16"
                                        HorizontalTextAlignment="Center"
                                        Text="{Binding TotalSalesRevenue, StringFormat='${0:N0}'}"
                                        TextColor="{StaticResource TextDark}"/>
                                    <Label
                                        FontSize="14"
                                        HorizontalTextAlignment="Center"
                                        Text="Total Value"
                                        TextColor="{StaticResource TextLight}"/>
                                </VerticalStackLayout>
                            </Grid>
                            <VerticalStackLayout Grid.Row="2"
                                    Spacing="8">
                                <Border
                                    Padding="10,6"
                                    Background="#26A69A"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#26A69A"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Direct Sale"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[0].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[0].Value, StringFormat='${0:#,##0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#5D6D7E"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#5D6D7E"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Online"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[1].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[1].Value, StringFormat='${0:#,##0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#4A90E2"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#4A90E2"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Custom Order"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[2].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[2].Value, StringFormat='${0:#,##0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#EC407A"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#EC407A"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Repairement"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[3].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[3].Value, StringFormat='${0:#,##0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                            </VerticalStackLayout>
                        </Grid>
                    </Border>
                </Grid>

                <Grid
                    Grid.Row="2"
                    ColumnDefinitions="*,*,*,*"
                    ColumnSpacing="20">
                    <Border
                        Grid.Column="0"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30"/>
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding NewCustomers}"
                                TextColor="{StaticResource TextDark}"/>
                            <Label
                                FontSize="14"
                                Text="New Customers"
                                TextColor="{StaticResource TextLight}"/>
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding NewCustomersChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding NewCustomersChangePercent, Converter={StaticResource TrendColorConverter}}"/>
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <Border
                        Grid.Column="1"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30"/>
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding ReturningCustomers}"
                                TextColor="{StaticResource TextDark}"/>
                            <Label
                                FontSize="14"
                                Text="Returning Customers"
                                TextColor="{StaticResource TextLight}"/>
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding ReturningCustomersChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding ReturningCustomersChangePercent, Converter={StaticResource TrendColorConverter}}"/>
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <Border
                        Grid.Column="2"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30"/>
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding TotalCustomers}"
                                TextColor="{StaticResource TextDark}"/>
                            <Label
                                FontSize="14"
                                Text="Total Customers"
                                TextColor="{StaticResource TextLight}"/>
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding TotalCustomersChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding TotalCustomersChangePercent, Converter={StaticResource TrendColorConverter}}"/>
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <Border
                        Grid.Column="3"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30"/>
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding OverallConversionRate, StringFormat='{0:F0}%'}"
                                TextColor="{StaticResource TextDark}"/>
                            <Label
                                FontSize="14"
                                Text="Overall Conversion Rate"
                                TextColor="{StaticResource TextLight}"/>
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding ConversionRateChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding ConversionRateChangePercent, Converter={StaticResource TrendColorConverter}}"/>
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>
                </Grid>

                <Grid
                    Grid.Row="3"
                    ColumnDefinitions="*,*"
                    ColumnSpacing="20">
                    <Border
                        Grid.Column="0"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0"
                                    ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="Customer Count by Sale Type"/>
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20"/>
                            </Grid>
                            <Grid Grid.Row="1"
                                    RowDefinitions="Auto,*">
                                <Label
                                    Grid.Row="0"
                                    Margin="0,0,0,10"
                                    FontSize="16"
                                    Text="{Binding TotalCustomerCount, StringFormat='Total Customers {0}'}"
                                    TextColor="{StaticResource TextLight}"
                                    VerticalOptions="Start"/>
                                <charts:SfCartesianChart Grid.Row="1">
                                    <charts:SfCartesianChart.XAxes>
                                        <charts:CategoryAxis>
                                            <charts:CategoryAxis.LabelStyle>
                                                <charts:ChartAxisLabelStyle TextColor="{StaticResource TextDark}"/>
                                            </charts:CategoryAxis.LabelStyle>
                                        </charts:CategoryAxis>
                                    </charts:SfCartesianChart.XAxes>
                                    <charts:SfCartesianChart.YAxes>
                                        <charts:NumericalAxis>
                                            <charts:NumericalAxis.LabelStyle>
                                                <charts:ChartAxisLabelStyle TextColor="{StaticResource TextDark}"/>
                                            </charts:NumericalAxis.LabelStyle>
                                        </charts:NumericalAxis>
                                    </charts:SfCartesianChart.YAxes>
                                    <charts:SfCartesianChart.Series>
                                        <charts:ColumnSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding CustomerCountBySaleType}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Count"/>
                                    </charts:SfCartesianChart.Series>
                                </charts:SfCartesianChart>
                            </Grid>
                        </Grid>
                    </Border>

                    <Border
                        Grid.Column="1"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0"
                                    ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="E-Commerce Sales"/>
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20"/>
                            </Grid>
                            <Grid Grid.Row="1"
                                    VerticalOptions="Center">
                                <charts:SfCircularChart>
                                    <charts:SfCircularChart.Series>
                                        <charts:PieSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding ECommerceRevenueByMaterial}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Value"/>
                                    </charts:SfCircularChart.Series>
                                </charts:SfCircularChart>
                                <VerticalStackLayout
                                    HorizontalOptions="End"
                                    Spacing="10"
                                    VerticalOptions="Center">
                                    <Label
                                        FontFamily="NexaHeavy"
                                        FontSize="16"
                                        HorizontalTextAlignment="Center"
                                        Text="{Binding ECommerceRevenue, StringFormat='${0:N0}'}"
                                        TextColor="{StaticResource TextDark}"/>
                                    <Label
                                        FontSize="14"
                                        HorizontalTextAlignment="Center"
                                        Text="Total Value"
                                        TextColor="{StaticResource TextLight}"/>
                                </VerticalStackLayout>
                            </Grid>
                            <VerticalStackLayout Grid.Row="2"
                                    Spacing="8">
                                <Border
                                    Padding="10,6"
                                    Background="#4ECDC4"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#4ECDC4"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="{Binding ECommerceRevenueByMaterial[0].Name}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding ECommerceRevenueByMaterial[0].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding ECommerceRevenueByMaterial[0].Value, StringFormat='${0:N0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#404040"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#404040"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="{Binding ECommerceRevenueByMaterial[1].Name}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding ECommerceRevenueByMaterial[1].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding ECommerceRevenueByMaterial[1].Value, StringFormat='${0:N0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#45B7D1"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto"
                                            RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#45B7D1"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="{Binding ECommerceRevenueByMaterial[2].Name}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding ECommerceRevenueByMaterial[2].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding ECommerceRevenueByMaterial[2].Value, StringFormat='${0:N0}'}"
                                            TextColor="White"/>
                                    </Grid>
                                </Border>
                            </VerticalStackLayout>
                        </Grid>
                    </Border>
                </Grid>

            </Grid>
        </Grid>
    </ScrollView>


</ContentPage>
