<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GleamVault.MVVM.Views.ReportPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:charts="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
    xmlns:conv="clr-namespace:GleamVault.Converters"
    xmlns:editors="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
    xmlns:models="clr-namespace:GleamVault.MVVM.ViewModels"
    xmlns:shapes="clr-namespace:Microsoft.Maui.Controls.Shapes;assembly=Microsoft.Maui.Controls"
    xmlns:vm="clr-namespace:GleamVault.MVVM.ViewModels"
    Title="Dashboard"
    x:DataType="vm:ReportsVM"
    Background="{StaticResource Brush.BackgroundGradient}">

    <ScrollView>
        <Grid RowDefinitions="Auto,*" RowSpacing="0">
            <Grid Grid.Row="0" HeightRequest="200">
                <shapes:Path
                    Aspect="Fill"
                    Data="M0,0 L0,160 Q180,210 360,160 T720,160 L720,0 Z"
                    Fill="{StaticResource Brush.HeaderGradient}"
                    HorizontalOptions="Fill"
                    InputTransparent="True"
                    Opacity="1"
                    VerticalOptions="Fill" />
                <shapes:Path
                    Aspect="Fill"
                    Data="M0,0 L0,175 Q180,225 360,175 T720,175 L720,0 Z"
                    Fill="White"
                    HorizontalOptions="Fill"
                    InputTransparent="True"
                    Opacity="0.12"
                    VerticalOptions="Fill" />
                <Grid Padding="20,20,20,0" VerticalOptions="Start">
                    <HorizontalStackLayout Spacing="8">
                        <Image
                            HeightRequest="30"
                            Source="diamond.png"
                            WidthRequest="30" />
                        <Label StyleClass="h2" Text="Dashboard" />
                    </HorizontalStackLayout>
                </Grid>
            </Grid>

            <Grid
                Grid.Row="1"
                Padding="20"
                RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                RowSpacing="20">

                <Border
                    Grid.Row="0"
                    Padding="20"
                    Background="#1E1E1E"
                    Shadow="{StaticResource Sh.CyanMd}"
                    StrokeShape="RoundRectangle 20"
                    StrokeThickness="0">
                    <Grid RowDefinitions="Auto,Auto,*">
                        <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto">
                            <VerticalStackLayout Grid.Column="0" Spacing="4">
                                <Label
                                    FontFamily="NexaHeavy"
                                    FontSize="20"
                                    Text="XAU/USD"
                                    TextColor="White" />
                                <Label
                                    FontSize="14"
                                    Text="{Binding CurrentGoldPrice.Price, StringFormat='${0:F2}'}"
                                    TextColor="{Binding CurrentGoldPrice.ChangePercent, Converter={StaticResource TrendColorConverter}}" />
                            </VerticalStackLayout>
                            <VerticalStackLayout
                                Grid.Column="1"
                                HorizontalOptions="End"
                                Spacing="4">
                                <Label
                                    FontSize="12"
                                    HorizontalTextAlignment="End"
                                    Text="{Binding CurrentGoldPrice.ChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding CurrentGoldPrice.ChangePercent, Converter={StaticResource TrendColorConverter}}" />
                                <Label
                                    FontSize="11"
                                    HorizontalTextAlignment="End"
                                    Text="{Binding CurrentGoldPrice.Timestamp, StringFormat='Updated: {0:MMM dd, HH:mm}'}"
                                    TextColor="White" />
                            </VerticalStackLayout>
                            <Border
                                Grid.Column="2"
                                Margin="15,0,0,0"
                                Padding="10,6"
                                Background="#333333"
                                StrokeShape="RoundRectangle 8"
                                StrokeThickness="0">
                                <editors:SfComboBox
                                    Background="Transparent"
                                    DropDownBackground="#2E2E2E"
                                    DropDownIconColor="#00D4B5"
                                    DropDownItemHeight="40"
                                    DropDownItemTextColor="White"
                                    FontFamily="NexaLight"
                                    FontSize="12"
                                    IsEditable="False"
                                    ItemsSource="{Binding Timeframes}"
                                    SelectedItem="{Binding SelectedTimeframe, Mode=TwoWay}"
                                    SelectionChanged="TimeframeCombo_SelectionChanged"
                                    Stroke="Transparent"
                                    TextColor="White"
                                    WidthRequest="100">
                                    <editors:SfComboBox.ItemTemplate>
                                        <DataTemplate x:DataType="x:String">
                                            <Grid Padding="12,8" BackgroundColor="Transparent">
                                                <Label
                                                    FontFamily="NexaLight"
                                                    FontSize="12"
                                                    Text="{Binding}"
                                                    TextColor="White"
                                                    VerticalOptions="Center" />
                                            </Grid>
                                        </DataTemplate>
                                    </editors:SfComboBox.ItemTemplate>
                                </editors:SfComboBox>
                            </Border>
                        </Grid>
                        <BoxView
                            Grid.Row="1"
                            Margin="0,10"
                            BackgroundColor="#333333"
                            HeightRequest="1" />
                        <Grid Grid.Row="2" Margin="0,10,0,0">
                            <charts:SfCartesianChart BackgroundColor="#1E1E1E">
                                <charts:SfCartesianChart.XAxes>
                                    <charts:DateTimeAxis>
                                        <charts:DateTimeAxis.LabelStyle>
                                            <charts:ChartAxisLabelStyle LabelFormat="MMM dd" TextColor="White" />
                                        </charts:DateTimeAxis.LabelStyle>
                                        <charts:DateTimeAxis.AxisLineStyle>
                                            <charts:ChartLineStyle Stroke="White" />
                                        </charts:DateTimeAxis.AxisLineStyle>
                                    </charts:DateTimeAxis>
                                </charts:SfCartesianChart.XAxes>
                                <charts:SfCartesianChart.YAxes>
                                    <charts:NumericalAxis>
                                        <charts:NumericalAxis.LabelStyle>
                                            <charts:ChartAxisLabelStyle LabelFormat="$0.00" TextColor="White" />
                                        </charts:NumericalAxis.LabelStyle>
                                    </charts:NumericalAxis>
                                </charts:SfCartesianChart.YAxes>
                                <charts:SfCartesianChart.Series>
                                    <charts:LineSeries
                                        EnableTooltip="True"
                                        ItemsSource="{Binding GoldPriceHistory}"
                                        ShowDataLabels="False"
                                        XBindingPath="Date"
                                        YBindingPath="Close" />
                                </charts:SfCartesianChart.Series>
                            </charts:SfCartesianChart>
                        </Grid>
                    </Grid>
                </Border>

                <Grid
                    Grid.Row="1"
                    ColumnDefinitions="*,*"
                    ColumnSpacing="20">
                    <Border
                        Grid.Column="0"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="Total Gold Weight Sold" />
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20" />
                            </Grid>
                            <Grid Grid.Row="1" VerticalOptions="Center">
                                <charts:SfCircularChart>
                                    <charts:SfCircularChart.Series>
                                        <charts:PieSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding GoldWeightBySaleType}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Value" />
                                    </charts:SfCircularChart.Series>
                                </charts:SfCircularChart>
                                <VerticalStackLayout
                                    HorizontalOptions="End"
                                    Spacing="10"
                                    VerticalOptions="Center">
                                    <Label
                                        FontFamily="NexaHeavy"
                                        FontSize="16"
                                        HorizontalTextAlignment="Center"
                                        Text="{Binding TotalGoldWeightValue, StringFormat='${0:N0}'}"
                                        TextColor="{StaticResource TextDark}" />
                                    <Label
                                        FontSize="14"
                                        HorizontalTextAlignment="Center"
                                        Text="Total Value"
                                        TextColor="{StaticResource TextLight}" />
                                </VerticalStackLayout>
                            </Grid>
                            <VerticalStackLayout Grid.Row="2" Spacing="8">
                                <Border
                                    Padding="10,6"
                                    Background="#2D5016"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#2D5016"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Direct Sale"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding GoldWeightBySaleType[0].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding GoldWeightBySaleType[0].Value, StringFormat='{0} grams'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#7CB342"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#7CB342"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Bespoke"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding GoldWeightBySaleType[1].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding GoldWeightBySaleType[1].Value, StringFormat='{0} grams'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#8D6E63"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#8D6E63"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Gold Booking"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding GoldWeightBySaleType[2].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding GoldWeightBySaleType[2].Value, StringFormat='{0} grams'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                            </VerticalStackLayout>
                        </Grid>
                    </Border>

                    <Border
                        Grid.Column="1"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="Total Sales Revenue" />
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20" />
                            </Grid>
                            <Grid Grid.Row="1" VerticalOptions="Center">
                                <charts:SfCircularChart>
                                    <charts:SfCircularChart.Series>
                                        <charts:PieSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding RevenueBySaleType}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Value" />
                                    </charts:SfCircularChart.Series>
                                </charts:SfCircularChart>
                                <VerticalStackLayout
                                    HorizontalOptions="End"
                                    Spacing="10"
                                    VerticalOptions="Center">
                                    <Label
                                        FontFamily="NexaHeavy"
                                        FontSize="16"
                                        HorizontalTextAlignment="Center"
                                        Text="{Binding TotalSalesRevenue, StringFormat='${0:N0}'}"
                                        TextColor="{StaticResource TextDark}" />
                                    <Label
                                        FontSize="14"
                                        HorizontalTextAlignment="Center"
                                        Text="Total Value"
                                        TextColor="{StaticResource TextLight}" />
                                </VerticalStackLayout>
                            </Grid>
                            <VerticalStackLayout Grid.Row="2" Spacing="8">
                                <Border
                                    Padding="10,6"
                                    Background="#2D5016"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#2D5016"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Direct Sale"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[0].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[0].Value, StringFormat='${0:N0}'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#7CB342"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#7CB342"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Bespoke"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[1].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[1].Value, StringFormat='${0:N0}'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#A1887F"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#A1887F"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Repair"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[2].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[2].Value, StringFormat='${0:N0}'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#8D6E63"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#8D6E63"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Gold Booking"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[3].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[3].Value, StringFormat='${0:N0}'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                                <Border
                                    Padding="10,6"
                                    Background="#9E9E9E"
                                    StrokeShape="RoundRectangle 8"
                                    StrokeThickness="0">
                                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                        <BoxView
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            BackgroundColor="#9E9E9E"
                                            HeightRequest="12"
                                            VerticalOptions="Center"
                                            WidthRequest="12" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            FontSize="13"
                                            Text="Gift Cards"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            FontSize="13"
                                            HorizontalTextAlignment="End"
                                            Text="{Binding RevenueBySaleType[4].Percentage, StringFormat='{0:F0}%'}"
                                            TextColor="White"
                                            VerticalOptions="Center" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="20,4,0,0"
                                            FontSize="12"
                                            Text="{Binding RevenueBySaleType[4].Value, StringFormat='${0:N0}'}"
                                            TextColor="White" />
                                    </Grid>
                                </Border>
                            </VerticalStackLayout>
                        </Grid>
                    </Border>
                </Grid>

                <Grid
                    Grid.Row="2"
                    ColumnDefinitions="*,*,*,*"
                    ColumnSpacing="20">
                    <Border
                        Grid.Column="0"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30" />
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding NewCustomers}"
                                TextColor="{StaticResource TextDark}" />
                            <Label
                                FontSize="14"
                                Text="New Customers"
                                TextColor="{StaticResource TextLight}" />
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding NewCustomersChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding NewCustomersChangePercent, Converter={StaticResource TrendColorConverter}}" />
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <Border
                        Grid.Column="1"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30" />
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding ReturningCustomers}"
                                TextColor="{StaticResource TextDark}" />
                            <Label
                                FontSize="14"
                                Text="Returning Customers"
                                TextColor="{StaticResource TextLight}" />
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding ReturningCustomersChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding ReturningCustomersChangePercent, Converter={StaticResource TrendColorConverter}}" />
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <Border
                        Grid.Column="2"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30" />
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding TotalCustomers}"
                                TextColor="{StaticResource TextDark}" />
                            <Label
                                FontSize="14"
                                Text="Total Customers"
                                TextColor="{StaticResource TextLight}" />
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding TotalCustomersChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding TotalCustomersChangePercent, Converter={StaticResource TrendColorConverter}}" />
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <Border
                        Grid.Column="3"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanSm}"
                        StrokeShape="RoundRectangle 15"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Image
                                HeightRequest="30"
                                Source="diamond.png"
                                WidthRequest="30" />
                            <Label
                                FontFamily="NexaHeavy"
                                FontSize="28"
                                Text="{Binding OverallConversionRate, StringFormat='{0:F0}%'}"
                                TextColor="{StaticResource TextDark}" />
                            <Label
                                FontSize="14"
                                Text="Overall Conversion Rate"
                                TextColor="{StaticResource TextLight}" />
                            <HorizontalStackLayout Spacing="5">
                                <Label
                                    FontSize="12"
                                    Text="{Binding ConversionRateChangePercent, StringFormat='{0:+0.00;-0.00}%'}"
                                    TextColor="{Binding ConversionRateChangePercent, Converter={StaticResource TrendColorConverter}}" />
                                <Label
                                    FontSize="12"
                                    Text="vs last 30 days"
                                    TextColor="{StaticResource TextLight}" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>
                </Grid>

                <Grid
                    Grid.Row="3"
                    ColumnDefinitions="*,*"
                    ColumnSpacing="20">
                    <Border
                        Grid.Column="0"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="Customer Count by Sale Type" />
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20" />
                            </Grid>
                            <Grid Grid.Row="1" RowDefinitions="Auto,*">
                                <Label
                                    Grid.Row="0"
                                    Margin="0,0,0,10"
                                    FontSize="16"
                                    Text="{Binding TotalCustomerCount, StringFormat='Total Customers {0}'}"
                                    TextColor="{StaticResource TextLight}"
                                    VerticalOptions="Start" />
                                <charts:SfCartesianChart Grid.Row="1">
                                    <charts:SfCartesianChart.Series>
                                        <charts:ColumnSeries
                                            EnableTooltip="True"
                                            ItemsSource="{Binding CustomerCountBySaleType}"
                                            ShowDataLabels="True"
                                            XBindingPath="Name"
                                            YBindingPath="Count" />
                                    </charts:SfCartesianChart.Series>
                                </charts:SfCartesianChart>
                            </Grid>
                        </Grid>
                    </Border>

                    <Border
                        Grid.Column="1"
                        Padding="20"
                        Background="{StaticResource Brush.CardBgGradient}"
                        Shadow="{StaticResource Sh.CyanMd}"
                        StrokeShape="RoundRectangle 20"
                        StrokeThickness="0">
                        <Grid RowDefinitions="Auto,*,Auto">
                            <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                                <Label
                                    Grid.Column="0"
                                    StyleClass="h3"
                                    Text="E-Commerce Sales" />
                                <Image
                                    Grid.Column="1"
                                    HeightRequest="20"
                                    Source="info.png"
                                    WidthRequest="20" />
                            </Grid>
                            <Grid
                                Grid.Row="1"
                                ColumnDefinitions="*,*"
                                ColumnSpacing="15">
                                <Grid Grid.Column="0">
                                    <charts:SfCircularChart>
                                        <charts:SfCircularChart.Series>
                                            <charts:PieSeries
                                                EnableTooltip="True"
                                                ItemsSource="{Binding ECommerceRevenueByChannel}"
                                                ShowDataLabels="True"
                                                XBindingPath="Name"
                                                YBindingPath="Value" />
                                        </charts:SfCircularChart.Series>
                                    </charts:SfCircularChart>
                                    <VerticalStackLayout
                                        HorizontalOptions="Center"
                                        Spacing="5"
                                        VerticalOptions="Center">
                                        <Label
                                            FontFamily="NexaHeavy"
                                            FontSize="14"
                                            HorizontalTextAlignment="Center"
                                            Text="{Binding ECommerceRevenue, StringFormat='${0:N0}'}"
                                            TextColor="{StaticResource TextDark}" />
                                        <Label
                                            FontSize="12"
                                            HorizontalTextAlignment="Center"
                                            Text="Total Sales"
                                            TextColor="{StaticResource TextLight}" />
                                    </VerticalStackLayout>
                                    <Label
                                        FontSize="14"
                                        HorizontalOptions="Start"
                                        Text="Revenue"
                                        TextColor="{StaticResource TextDark}"
                                        VerticalOptions="Start" />
                                </Grid>
                                <Grid Grid.Column="1">
                                    <charts:SfCircularChart>
                                        <charts:SfCircularChart.Series>
                                            <charts:PieSeries
                                                EnableTooltip="True"
                                                ItemsSource="{Binding ECommerceGoldWeightByChannel}"
                                                ShowDataLabels="True"
                                                XBindingPath="Name"
                                                YBindingPath="Value" />
                                        </charts:SfCircularChart.Series>
                                    </charts:SfCircularChart>
                                    <VerticalStackLayout
                                        HorizontalOptions="Center"
                                        Spacing="5"
                                        VerticalOptions="Center">
                                        <Label
                                            FontFamily="NexaHeavy"
                                            FontSize="14"
                                            HorizontalTextAlignment="Center"
                                            Text="{Binding ECommerceGoldWeight, StringFormat='{0} g'}"
                                            TextColor="{StaticResource TextDark}" />
                                        <Label
                                            FontSize="12"
                                            HorizontalTextAlignment="Center"
                                            Text="Total Gold Weight"
                                            TextColor="{StaticResource TextLight}" />
                                    </VerticalStackLayout>
                                    <Label
                                        FontSize="14"
                                        HorizontalOptions="Start"
                                        Text="Gold Weight"
                                        TextColor="{StaticResource TextDark}"
                                        VerticalOptions="Start" />
                                </Grid>
                            </Grid>
                            <Grid
                                Grid.Row="2"
                                ColumnDefinitions="*,*"
                                ColumnSpacing="15">
                                <VerticalStackLayout Grid.Column="0" Spacing="8">
                                    <Border
                                        Padding="10,6"
                                        Background="#2D5016"
                                        StrokeShape="RoundRectangle 8"
                                        StrokeThickness="0">
                                        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                            <BoxView
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                BackgroundColor="#2D5016"
                                                HeightRequest="12"
                                                VerticalOptions="Center"
                                                WidthRequest="12" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="8,0,0,0"
                                                FontSize="13"
                                                Text="Website"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                FontSize="13"
                                                HorizontalTextAlignment="End"
                                                Text="{Binding ECommerceRevenueByChannel[0].Percentage, StringFormat='{0:F0}%'}"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="20,4,0,0"
                                                FontSize="12"
                                                Text="{Binding ECommerceRevenueByChannel[0].Value, StringFormat='${0:N0}'}"
                                                TextColor="White" />
                                        </Grid>
                                    </Border>
                                    <Border
                                        Padding="10,6"
                                        Background="#A1887F"
                                        StrokeShape="RoundRectangle 8"
                                        StrokeThickness="0">
                                        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                            <BoxView
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                BackgroundColor="#A1887F"
                                                HeightRequest="12"
                                                VerticalOptions="Center"
                                                WidthRequest="12" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="8,0,0,0"
                                                FontSize="13"
                                                Text="App"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                FontSize="13"
                                                HorizontalTextAlignment="End"
                                                Text="{Binding ECommerceRevenueByChannel[1].Percentage, StringFormat='{0:F0}%'}"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="20,4,0,0"
                                                FontSize="12"
                                                Text="{Binding ECommerceRevenueByChannel[1].Value, StringFormat='${0:N0}'}"
                                                TextColor="White" />
                                        </Grid>
                                    </Border>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1" Spacing="8">
                                    <Border
                                        Padding="10,6"
                                        Background="#2D5016"
                                        StrokeShape="RoundRectangle 8"
                                        StrokeThickness="0">
                                        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                            <BoxView
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                BackgroundColor="#2D5016"
                                                HeightRequest="12"
                                                VerticalOptions="Center"
                                                WidthRequest="12" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="8,0,0,0"
                                                FontSize="13"
                                                Text="Website"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                FontSize="13"
                                                HorizontalTextAlignment="End"
                                                Text="{Binding ECommerceGoldWeightByChannel[0].Percentage, StringFormat='{0:F0}%'}"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="20,4,0,0"
                                                FontSize="12"
                                                Text="{Binding ECommerceGoldWeightByChannel[0].Value, StringFormat='{0} g'}"
                                                TextColor="White" />
                                        </Grid>
                                    </Border>
                                    <Border
                                        Padding="10,6"
                                        Background="#A1887F"
                                        StrokeShape="RoundRectangle 8"
                                        StrokeThickness="0">
                                        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                                            <BoxView
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                BackgroundColor="#A1887F"
                                                HeightRequest="12"
                                                VerticalOptions="Center"
                                                WidthRequest="12" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="8,0,0,0"
                                                FontSize="13"
                                                Text="App"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                FontSize="13"
                                                HorizontalTextAlignment="End"
                                                Text="{Binding ECommerceGoldWeightByChannel[1].Percentage, StringFormat='{0:F0}%'}"
                                                TextColor="White"
                                                VerticalOptions="Center" />
                                            <Label
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="20,4,0,0"
                                                FontSize="12"
                                                Text="{Binding ECommerceGoldWeightByChannel[1].Value, StringFormat='{0} g'}"
                                                TextColor="White" />
                                        </Grid>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>

            </Grid>
        </Grid>
    </ScrollView>

    <ContentPage.Resources>
        <ResourceDictionary>
            <conv:TrendColorConverter x:Key="TrendColorConverter" />
            <conv:TimeframeSelectedConverter x:Key="TimeframeSelectedConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
</ContentPage>
